<!doctype html>
<html lang="es">
<head>
  <!-- ===== ICONO + APP ANDROID (AGREGAR A PANTALLA DE INICIO) ===== -->

<meta name="theme-color" content="#000000">

<link rel="icon" type="image/png" sizes="192x192"
      href="https://i.postimg.cc/X7RpZw8W/1000015073.png">

<link rel="manifest" href='data:application/manifest+json,{
  "name": "Mi Aplicaci√≥n Web",
  "short_name": "MiApp",
  "start_url": "./",
  "display": "standalone",
  "background_color": "#000000",
  "theme_color": "#000000",
  "orientation": "portrait",
  "icons": [
    {
      "src": "https://i.postimg.cc/X7RpZw8W/1000015073.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "https://i.postimg.cc/X7RpZw8W/1000015073.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}'>

<!-- ============================================================ -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#070b16" />
  <title>Podcasts ¬∑ 6 en 6 ‚Äî Premium</title>
  <style>
    /* =========================================================
       Podcasts ¬∑ 6 en 6 ‚Äî PREMIUM UI (v4 + copy llamativo)
       - Dise√±o tipo app premium (glass + depth + micro-interactions)
       - PC: sidebar + content
       - M√≥vil: bottom sheet + sticky player
       - Sin frameworks, funciona local (JSONP)
       ========================================================= */

    :root{
      --bg0:#040713; --bg1:#070b16;
      --text:#f3f6ff;
      --muted: rgba(243,246,255,.74);
      --muted2: rgba(243,246,255,.56);
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.16);

      --a:#8b5cf6; --b:#22d3ee; --c:#fb7185;

      --ok:#22c55e; --bad:#ef4444; --warn:#f59e0b;

      --shadow: 0 26px 60px rgba(0,0,0,.58);
      --shadow2: 0 14px 28px rgba(0,0,0,.38);
      --shadow3: 0 10px 18px rgba(0,0,0,.28);

      --r: 22px; --r2: 18px;
      --max: 1240px; --gap: 14px;

      --h1: clamp(18px, 1.2vw + 14px, 22px);
      --h2: clamp(14px, .75vw + 12px, 17px);
      --p:  clamp(13px, .5vw + 11px, 14px);
      --small: 12px;

      --ring: 0 0 0 4px rgba(34,211,238,.18);
      color-scheme: dark;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:
        radial-gradient(900px 600px at 8% 12%, rgba(139,92,246,.30), transparent 55%),
        radial-gradient(900px 650px at 92% 16%, rgba(34,211,238,.22), transparent 55%),
        radial-gradient(1000px 700px at 55% 96%, rgba(251,113,133,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* subtle noise */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.10;
      mix-blend-mode: overlay;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.7' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
    }

    .container{ max-width: var(--max); margin: 0 auto; padding: 16px; position:relative; }

    /* Appbar */
    .appbar{
      position: sticky;
      top: 10px;
      z-index: 30;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: var(--r);
      background:
        radial-gradient(120% 220% at 0% 0%, rgba(255,255,255,.12), transparent 40%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      backdrop-filter: blur(18px);
      box-shadow: var(--shadow2);
    }

    .brand{ display:flex; align-items:center; gap:12px; min-width:0; }
    .logo{
      width:46px; height:46px;
      border-radius: 18px;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, var(--a), var(--b));
      box-shadow: 0 16px 24px rgba(0,0,0,.38);
      font-weight: 950;
      flex: 0 0 auto;
    }

    .brandText{ min-width:0; }
    .title{ font-size: var(--h1); font-weight: 950; letter-spacing: -.02em; margin:0; }
    .subtitle{ font-size: var(--p); color: var(--muted); line-height: 1.35; }

    .rightTop{ display:flex; align-items:center; gap:10px; }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.11);
      background: rgba(255,255,255,.06);
      font-size: 13px;
      color: var(--muted);
      white-space: nowrap;
    }

    /* Buttons */
    .btn{
      cursor:pointer;
      border: 1px solid transparent;
      color: white;
      font-weight: 900;
      padding: 12px 12px;
      border-radius: 16px;
      user-select:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      box-shadow: 0 16px 30px rgba(0,0,0,.32);
      background:
        radial-gradient(120% 180% at 10% 0%, rgba(255,255,255,.20), transparent 38%),
        linear-gradient(90deg, rgba(139,92,246,.98), rgba(34,211,238,.92));
      transition: transform .10s ease, filter .12s ease, box-shadow .12s ease;
    }
    .btn:hover{ filter: brightness(1.05); box-shadow: 0 18px 36px rgba(0,0,0,.38); }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; }

    .btn.secondary{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.12);
      color: var(--text);
      font-weight: 850;
      box-shadow:none;
    }
    .btn.secondary:hover{ background: rgba(255,255,255,.10); }

    .btn.ghost{
      background: rgba(255,255,255,.045);
      border-color: rgba(255,255,255,.10);
      color: var(--text);
      box-shadow:none;
    }
    .btn.ghost:hover{ background: rgba(255,255,255,.07); }

    .btn.sm{ padding: 9px 11px; border-radius: 14px; font-size: 13px; }
    .btn.block{ width:100%; }

    .icon{ width:18px; height:18px; fill: currentColor; opacity:.95; }

    /* Layout */
    .grid{ display:grid; grid-template-columns: 410px 1fr; gap: var(--gap); margin-top: var(--gap); align-items:start; }

    .panel{
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--r);
      background:
        radial-gradient(120% 220% at 0% 0%, rgba(255,255,255,.10), transparent 40%),
        linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.045));
      box-shadow: var(--shadow2);
      overflow:hidden;
    }

    .panelHeader{
      padding: 14px 14px 10px 14px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.10);
    }

    .panelTitle{ font-weight: 950; font-size: 16px; }
    .panelSub{ margin-top: 2px; font-size: var(--p); color: var(--muted); line-height: 1.35; }
    .panelBody{ padding: 14px; }

    .divider{ height:1px; background: linear-gradient(90deg, transparent, var(--border2), transparent); margin: 12px 0; }

    /* Inputs */
    label.hint{ display:block; margin: 0 0 6px 0; font-size: var(--small); color: rgba(243,246,255,.82); }
    .field{
      width:100%;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(120% 240% at 0% 0%, rgba(255,255,255,.12), transparent 40%),
        rgba(0,0,0,.22);
      color: var(--text);
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease;
    }
    .field::placeholder{ color: var(--muted2); }
    .field:focus{ border-color: rgba(34,211,238,.55); box-shadow: var(--ring); }

    .row{ display:flex; gap:10px; flex-wrap:wrap; }
    .row > *{ flex:1; min-width: 150px; }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px; margin-top: 10px; }

    .cardItem{
      border: 1px solid rgba(255,255,255,.11);
      background:
        radial-gradient(120% 260% at 0% 0%, rgba(255,255,255,.10), transparent 40%),
        rgba(0,0,0,.16);
      border-radius: 20px;
      padding: 12px;
      display:flex;
      gap: 12px;
      align-items:flex-start;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .cardItem:hover{ transform: translateY(-1px); background: rgba(0,0,0,.20); border-color: rgba(255,255,255,.18); }
    .cardItem.clickable{ cursor:pointer; }
    .cardItem.clickable:active{ transform: translateY(0) scale(.995); }

    .thumb{ width:74px; height:74px; border-radius: 20px; object-fit: cover; background: rgba(255,255,255,.07); flex: 0 0 auto; box-shadow: 0 16px 20px rgba(0,0,0,.26); }
    .grow{ flex:1; min-width:0; }
    .h2{ font-weight: 950; margin: 0 0 5px 0; font-size: var(--h2); }
    .meta{ font-size: var(--p); color: var(--muted); line-height: 1.35; }
    .mono{ margin-top: 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 12px; color: rgba(243,246,255,.60); }
    .actions{ margin-left:auto; display:flex; flex-direction:column; gap:8px; align-items:flex-end; }

    .badgeSmall{ display:inline-flex; align-items:center; gap:6px; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); color: rgba(243,246,255,.78); font-size: 12px; width: fit-content; }

    /* Pager */
    .pager{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:flex-end; margin-top: 10px; }
    .pagebtn{ padding: 9px 11px; border-radius: 14px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); color: var(--text); font-weight: 850; transition: background .12s ease, transform .08s ease; }
    .pagebtn:hover{ background: rgba(255,255,255,.09); }
    .pagebtn:active{ transform: translateY(1px); }
    .pagebtn.active{ background: linear-gradient(90deg, rgba(139,92,246,.92), rgba(34,211,238,.88)); border-color: transparent; }

    /* Toast */
    .toast{ margin-top: 10px; padding: 10px 12px; border-radius: 16px; border: 1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.22); color: var(--muted); }
    .toast.ok{ border-color: rgba(34,197,94,.35); color: rgba(187,247,208,.95); background: rgba(34,197,94,.08); }
    .toast.bad{ border-color: rgba(239,68,68,.35); color: rgba(254,202,202,.95); background: rgba(239,68,68,.08); }
    .toast.warn{ border-color: rgba(245,158,11,.35); color: rgba(254,215,170,.95); background: rgba(245,158,11,.08); }

    .note{ font-size: 12px; color: rgba(243,246,255,.62); }

    /* Skeleton */
    .skeleton{ position:relative; overflow:hidden; }
    .skeleton::before{ content:""; position:absolute; inset:0; background: linear-gradient(90deg, rgba(255,255,255,.03), rgba(255,255,255,.16), rgba(255,255,255,.03)); transform: translateX(-100%); animation: shimmer 1.05s infinite; }
    @keyframes shimmer{ 100%{ transform: translateX(100%); } }
    .skRow{ display:flex; gap:12px; align-items:center; }
    .skThumb{ width:74px; height:74px; border-radius:20px; background: rgba(255,255,255,.06); }
    .skLine{ height:12px; border-radius:10px; background: rgba(255,255,255,.06); }

    /* Player */
    .playerBox{ margin-top: 10px; padding: 12px; border-radius: 20px; border:1px solid rgba(255,255,255,.12);
      background: radial-gradient(120% 220% at 0% 0%, rgba(255,255,255,.10), transparent 40%), rgba(0,0,0,.24);
      box-shadow: var(--shadow3);
    }
    audio{ width:100%; margin-top: 10px; border-radius: 14px; overflow:hidden; }

    /* Mobile */
    #backdrop{ position:fixed; inset:0; background: rgba(0,0,0,.66); backdrop-filter: blur(12px); display:none; z-index:40; }
    #openSearchBtn{ display:none; }

    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      .pill{ display:none; }
      #openSearchBtn{ display:inline-flex; }

      #searchPanel{ position: fixed; left: 0; right: 0; bottom: 0; transform: translateY(110%); max-height: 86vh; z-index: 50; border-radius: 26px 26px 0 0; box-shadow: var(--shadow); }
      body.panel-open #searchPanel{ transform: translateY(0%); transition: transform .20s ease; }
      body.panel-open #backdrop{ display:block; }

      .cardItem{ flex-direction: column; align-items: stretch; }
      .thumb{ width:92px; height:92px; border-radius: 22px; }
      .actions{ margin-left:0; width:100%; flex-direction: row; align-items: stretch; gap:10px; }
      .actions .btn{ width:100%; }

      .playerBox{ position: sticky; bottom: 10px; }
      .btn{ border-radius: 18px; }
    }

    .mobileOnly{ display:none; }
    @media (max-width: 980px){ .mobileOnly{ display:inline-flex; } }

    :focus-visible{ outline:none; box-shadow: var(--ring); }
    @media (prefers-reduced-motion: reduce){ *{ transition:none !important; animation:none !important; } }
  

/* =========================
   Reproductor PRO (custom)
========================= */
.proPlayer{ padding: 14px; }
.proControls{ display:flex; gap:12px; align-items:flex-start; }
.proMain{ flex:0 0 auto; width:54px; height:54px; padding:0; border-radius: 18px; display:grid; place-items:center; }
.proCenter{ flex:1; min-width:0; }
.proTopLine{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
.proTime{ font-weight: 950; font-size: 13px; color: rgba(243,246,255,.92); white-space:nowrap; }
.proTime small{ color: var(--muted); font-weight: 850; }
.proRight{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
.proSelect{ width:auto; padding: 10px 10px; border-radius: 14px; font-weight: 900; }

.proRange{ width:100%; -webkit-appearance:none; appearance:none; height: 8px; border-radius: 999px; background: rgba(255,255,255,.12); outline:none; position:relative; overflow:hidden; }
.proRange::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:999px; background:#fff; box-shadow: 0 0 0 5px rgba(34,211,238,.16); border: 1px solid rgba(0,0,0,.35); }
.proRange::-moz-range-thumb{ width:18px; height:18px; border-radius:999px; background:#fff; border: 1px solid rgba(0,0,0,.35); }

.proRangeWrap{ position:relative; margin-top:10px; border-radius: 999px; }
.proRangeWrap::before{ content:""; position:absolute; inset:0; border-radius:999px; width: var(--fill, 0%); background: linear-gradient(90deg, rgba(139,92,246,.95), rgba(34,211,238,.85)); pointer-events:none; }
.proRangeWrap > input{ position:relative; background: transparent; }

.proVolRow{ display:flex; gap:10px; align-items:center; margin-top:12px; flex-wrap:wrap; }

/* make secondary small buttons tighter on player */
.proPlayer .btn.secondary.sm{ padding: 9px 10px; border-radius: 14px; }

@media (max-width: 980px){
  .proControls{ align-items:stretch; }
  .proMain{ width:56px; height:56px; }
}

</style>
</head>
<body>
  <div class="container">
    <header class="appbar" aria-label="Barra superior">
      <div class="brand">
        <div class="logo" aria-hidden="true">üéôÔ∏è</div>
        <div class="brandText">
          <div class="title">Podcasts ¬∑ 6 en 6 <span style="opacity:.75;font-weight:850;">Premium</span></div>
          <div class="subtitle">Descubre, explora y escucha los mejores podcasts. Encuentra historias, ideas y conversaciones que valen la pena.</div>
        </div>
      </div>
      <div class="rightTop">
        <div class="pill">Origen: <b id="providerLabel">‚Äî</b></div>
        <button class="btn secondary sm" id="openSearchBtn" type="button">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 4a6 6 0 104.47 10.03l3.25 3.25 1.41-1.41-3.25-3.25A6 6 0 0010 4zm0 2a4 4 0 110 8 4 4 0 010-8z"/></svg>
          Buscar
        </button>
      </div>
    </header>

    <div id="backdrop" aria-hidden="true"></div>

    <div class="grid">
      <aside class="panel" id="searchPanel" aria-label="Panel de b√∫squeda">
        <div class="panelHeader">
          <div>
            <div class="panelTitle">Buscar</div>
            <div class="panelSub">Escribe lo que te interesa y descubre podcasts hechos para ti.</div>
          </div>
          <button class="btn ghost sm mobileOnly" id="closeSearchBtn" type="button" title="Cerrar">‚úï</button>
        </div>
        <div class="panelBody">
          <label class="hint" for="q">Palabra clave</label>
          <input class="field" id="q" placeholder="Ej: ingl√©s, noticias, ciencia‚Ä¶" value="english learning" />

          <div class="row" style="margin-top:10px;">
            <button class="btn" id="searchBtn" type="button">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M10 4a6 6 0 104.47 10.03l3.25 3.25 1.41-1.41-3.25-3.25A6 6 0 0010 4zm0 2a4 4 0 110 8 4 4 0 010-8z"/></svg>
              Buscar
            </button>
            <button class="btn secondary" id="clearBtn" type="button">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12l-1 14H7L6 7zm3-3h6l1 2H8l1-2z"/></svg>
              Limpiar
            </button>
          </div>

          <div style="margin-top:10px;" class="row">
            <div>
              <label class="hint" for="podSize">Podcasts por p√°gina</label>
              <select class="field" id="podSize">
                <option value="6" selected>6</option>
                <option value="9">9</option>
                <option value="12">12</option>
                <option value="16">16</option>
              </select>
            </div>
            <div>
              <label class="hint">Episodios por p√°gina</label>
              <select class="field" disabled><option selected>6</option></select>
            </div>
          </div>

          <div class="divider"></div>

          <div class="panelTitle" style="font-size:14px;">Abrir por iTunes ID (opcional)</div>
          <div class="panelSub" style="margin-top:2px;">¬øYa tienes un podcast en mente? Pega su ID y entra directo a los episodios.</div>
          <input class="field" id="manualId" placeholder="Ej: 979020229" style="margin-top:8px;" />
          <div class="row" style="margin-top:10px;">
            <button class="btn secondary" id="openByIdBtn" type="button">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3l4 4h-3v6h-2V7H8l4-4zm-7 14h14v2H5v-2z"/></svg>
              Abrir por ID
            </button>
          </div>

          <div id="toast" class="toast" style="display:none;" role="status" aria-live="polite"></div>
          <div class="note" style="margin-top:10px;">Consejo: prueba con temas como <b>ciencia</b>, <b>historias</b>, <b>finanzas</b> o <b>ingl√©s</b>.</div>
        </div>
      </aside>

      <main class="panel" aria-label="Contenido">
        <div class="panelHeader">
          <div>
            <div class="panelTitle">Resultados</div>
            <div class="panelSub" id="summary">¬øQu√© te gustar√≠a escuchar hoy? Empieza buscando un tema.</div>
          </div>
          <div style="display:flex; gap:10px; align-items:center;">
            <button class="btn secondary sm" id="refreshBtn" type="button" style="display:none;">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5a5 5 0 11-9.9-1H5.02A7 7 0 1012 6z"/></svg>
              Actualizar
            </button>
          </div>
        </div>

        <div class="panelBody">
          <div id="podList" class="list"></div>
          <div id="podPager" class="pager"></div>

          <div class="divider"></div>

          <section id="feedBox" style="display:none;" aria-label="Episodios">
            <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-end; flex-wrap:wrap;">
              <div style="min-width:0;">
                <div class="panelTitle" id="feedTitle">Podcast</div>
                <div class="panelSub" id="feedDesc" style="max-width: 80ch;"></div>
                <div class="panelSub">Episodios disponibles: <b id="feedCount">0</b></div>
              </div>
              <div class="badgeSmall" title="Se muestran 6 en 6">üìÑ 6 en 6</div>
            </div>

            <div id="epList" class="list" style="margin-top:12px;"></div>
            <div id="epPager" class="pager"></div>

            <div class="divider"></div>

            <div class="panelTitle" style="font-size:14px;">Reproductor</div>
            <div class="playerBox proPlayer" id="playerBox">
              <div class="panelSub" id="nowPlaying">üéß Selecciona un episodio para empezar a escuchar</div>

              <!-- Reproductor PRO (UI personalizada) -->
              <div class="proControls" role="group" aria-label="Controles del reproductor">
                <button class="btn proMain" id="ppPlay" type="button" aria-label="Reproducir / Pausar">
                  <svg class="icon" id="ppPlayIcon" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
                </button>

                <div class="proCenter">
                  <div class="proTopLine">
                    <div class="proTime"><span id="ppCur">0:00</span> <small>/</small> <span id="ppDur">0:00</span></div>

                    <div class="proRight">
                      <button class="btn secondary sm" id="ppRew" type="button" aria-label="Retroceder 15 segundos">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5V2L8 6l4 4V7c2.76 0 5 2.24 5 5a5 5 0 11-8.66-3.54L6.9 7.02A7 7 0 1012 5z"/></svg>
                      </button>
                      <button class="btn secondary sm" id="ppFwd" type="button" aria-label="Adelantar 30 segundos">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5a7 7 0 105.1 11.8l-1.44-1.44A5 5 0 1112 7v3l4-4-4-4v3z"/></svg>
                      </button>
                      <button class="btn secondary sm" id="ppMute" type="button" aria-label="Silenciar">
                        <svg class="icon" id="ppVolIcon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10v4h4l5 4V6L7 10H3zm13.5 2a3.5 3.5 0 00-1.5-2.9v5.8A3.5 3.5 0 0016.5 12zm0-8a9.5 9.5 0 01.5 16.9v-2.2A7.5 7.5 0 0017 6.3V4z"/></svg>
                      </button>

                      <select class="field proSelect" id="ppSpeed" aria-label="Velocidad">
                        <option value="0.75">0.75√ó</option>
                        <option value="1" selected>1√ó</option>
                        <option value="1.25">1.25√ó</option>
                        <option value="1.5">1.5√ó</option>
                        <option value="2">2√ó</option>
                      </select>
                    </div>
                  </div>

                  <div class="proRangeWrap" id="ppSeekWrap" style="--fill:0%;">
                    <input class="proRange" id="ppSeek" type="range" min="0" max="1000" value="0" aria-label="Progreso"/>
                  </div>

                  <div class="proVolRow">
                    <div class="badgeSmall" title="Volumen">üîä Volumen</div>
                    <div class="proRangeWrap" id="ppVolWrap" style="--fill:70%; flex:1;">
                      <input class="proRange" id="ppVol" type="range" min="0" max="1" step="0.01" value="0.7" aria-label="Volumen"/>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Audio real (oculto, lo maneja la UI) -->
              <audio id="player" preload="none" style="display:none"></audio>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <script>
  (function(){
    function $(id){ return document.getElementById(id); }

    function toast(msg, type){
      var t = $('toast');
      if(!t) return;
      t.style.display = 'block';
      t.className = 'toast' + (type ? (' ' + type) : '');
      t.textContent = msg;
    }

    function setProvider(name){ $('providerLabel').textContent = name || '‚Äî'; }

    function jsonp(url, callbackParam, timeout){
      callbackParam = callbackParam || 'callback';
      timeout = timeout || 20000;
      return new Promise(function(resolve, reject){
        var cb = 'cb_' + Math.random().toString(36).slice(2);
        var sep = url.indexOf('?') >= 0 ? '&' : '?';
        var full = url + sep + encodeURIComponent(callbackParam) + '=' + encodeURIComponent(cb);
        var s = document.createElement('script');
        var done = false;
        var timer = setTimeout(function(){
          if(done) return;
          done = true;
          cleanup();
          reject(new Error('JSONP timeout'));
        }, timeout);

        function cleanup(){
          clearTimeout(timer);
          try{ delete window[cb]; }catch(e){}
          if(s && s.parentNode) s.parentNode.removeChild(s);
        }

        window[cb] = function(data){
          if(done) return;
          done = true;
          cleanup();
          resolve(data);
        };

        s.onerror = function(){
          if(done) return;
          done = true;
          cleanup();
          reject(new Error('JSONP error'));
        };

        s.src = full;
        document.head.appendChild(s);
      });
    }

    function stripHtml(h){
      var d = document.createElement('div');
      d.innerHTML = String(h || '');
      return (d.textContent || d.innerText || '').trim();
    }

    function formatDate(s){
      s = (s || '').trim();
      if(!s) return '';
      var d = new Date(s);
      if(!isNaN(d.getTime())){
        var dd = String(d.getDate()).padStart(2,'0');
        var mm = String(d.getMonth()+1).padStart(2,'0');
        var yy = d.getFullYear();
        return dd + '/' + mm + '/' + yy;
      }
      return s;
    }

    function safeText(el, txt){ el.textContent = (txt === undefined || txt === null) ? '' : String(txt); }

    function openPanel(){ document.body.classList.add('panel-open'); document.body.style.overflow = 'hidden'; }
    function closePanel(){ document.body.classList.remove('panel-open'); document.body.style.overflow = ''; }

    $('openSearchBtn').addEventListener('click', openPanel);
    $('backdrop').addEventListener('click', closePanel);
    $('closeSearchBtn').addEventListener('click', closePanel);
    document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closePanel(); });

    var state = { pods: [], podPage: 1, podSize: 6, selectedId: null, eps: [], epPage: 1, epSize: 6 };

    function renderPager(container, current, total, onGo){
      container.innerHTML = '';
      if(total <= 1) return;
      function add(label, page, active, disabled){
        var b = document.createElement('button');
        b.className = 'pagebtn' + (active ? ' active' : '');
        b.textContent = label;
        b.disabled = !!disabled;
        b.type = 'button';
        b.onclick = function(){ onGo(page); };
        container.appendChild(b);
      }
      add('¬´', 1, false, current===1);
      add('‚Äπ', Math.max(1, current-1), false, current===1);
      var start = Math.max(1, current-2);
      var end = Math.min(total, current+2);
      if(start > 1) add('1', 1, current===1, false);
      for(var p=start; p<=end; p++){
        if(p===1 || p===total) continue;
        add(String(p), p, p===current, false);
      }
      if(end < total) add(String(total), total, current===total, false);
      add('‚Ä∫', Math.min(total, current+1), false, current===total);
      add('¬ª', total, false, current===total);
    }

    function showSkeleton(count){
      var box = $('podList');
      box.innerHTML = '';
      for(var i=0;i<count;i++){
        var it = document.createElement('div');
        it.className = 'cardItem skeleton';
        var row = document.createElement('div');
        row.className = 'skRow';
        var th = document.createElement('div'); th.className = 'skThumb';
        var col = document.createElement('div');
        col.style.flex='1'; col.style.display='grid'; col.style.gap='8px';
        var l1=document.createElement('div'); l1.className='skLine'; l1.style.width='62%';
        var l2=document.createElement('div'); l2.className='skLine'; l2.style.width='42%';
        var l3=document.createElement('div'); l3.className='skLine'; l3.style.width='86%';
        col.appendChild(l1); col.appendChild(l2); col.appendChild(l3);
        row.appendChild(th); row.appendChild(col);
        it.appendChild(row);
        box.appendChild(it);
      }
    }

    function renderPods(){
      var total = state.pods.length;
      var size = state.podSize;
      var pages = Math.max(1, Math.ceil(total/size));
      state.podPage = Math.max(1, Math.min(pages, state.podPage));
      var start = (state.podPage-1)*size;
      var end = Math.min(total, start+size);
      $('summary').textContent = total ? ('Mostrando ' + (start+1) + '‚Äì' + end + ' de ' + total) : '¬øQu√© te gustar√≠a escuchar hoy? Empieza buscando un tema.';

      var box = $('podList');
      box.innerHTML = '';

      for(var i=start; i<end; i++){
        var p = state.pods[i];
        var item = document.createElement('div');
        item.className = 'cardItem clickable';
        item.tabIndex = 0;
        item.setAttribute('role','button');
        item.setAttribute('aria-label', 'Abrir podcast ' + (p.title || ''));

        item.addEventListener('click', function(id){ return function(){ openById(id); }; }(p.id));
        item.addEventListener('keydown', function(id){ return function(e){ if(e.key==='Enter' || e.key===' ') openById(id); }; }(p.id));

        var img = document.createElement('img');
        img.className = 'thumb';
        img.alt = '';
        img.loading = 'lazy';
        img.referrerPolicy = 'no-referrer';
        img.src = p.artwork || '';

        var grow = document.createElement('div');
        grow.className = 'grow';

        var h = document.createElement('div');
        h.className = 'h2';
        safeText(h, p.title || 'Podcast');

        var a = document.createElement('div');
        a.className = 'meta';
        safeText(a, p.author || '');

        var m = document.createElement('div');
        m.className = 'mono';
        safeText(m, p.feedUrl ? ('RSS: ' + p.feedUrl) : ('ID: ' + p.id));

        grow.appendChild(h); grow.appendChild(a); grow.appendChild(m);

        var actions = document.createElement('div');
        actions.className = 'actions';

        var btn = document.createElement('button');
        btn.className = 'btn sm block';
        btn.type = 'button';
        btn.innerHTML = "<svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M12 5v14m7-7H5' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round'/></svg> Ver episodios";
        btn.addEventListener('click', function(id){ return function(e){ e.stopPropagation(); openById(id); }; }(p.id));

        actions.appendChild(btn);

        item.appendChild(img); item.appendChild(grow); item.appendChild(actions);
        box.appendChild(item);
      }

      renderPager($('podPager'), state.podPage, pages, function(page){ state.podPage = page; renderPods(); });
    }

    function renderEpisodes(){
      var total = state.eps.length;
      var size = state.epSize; // 6
      var pages = Math.max(1, Math.ceil(total/size));
      state.epPage = Math.max(1, Math.min(pages, state.epPage));
      var start = (state.epPage-1)*size;
      var end = Math.min(total, start+size);
      $('feedCount').textContent = String(total);

      var box = $('epList');
      box.innerHTML = '';

      for(var i=start; i<end; i++){
        var ep = state.eps[i];
        var item = document.createElement('div');
        item.className = 'cardItem';

        var grow = document.createElement('div');
        grow.className = 'grow';

        var h = document.createElement('div');
        h.className = 'h2';
        safeText(h, ep.title || '(sin t√≠tulo)');

        var d = document.createElement('div');
        d.className = 'meta';
        safeText(d, formatDate(ep.pubDate));

        var desc = document.createElement('div');
        desc.className = 'meta';
        desc.style.display='-webkit-box';
        desc.style.webkitLineClamp='2';
        desc.style.webkitBoxOrient='vertical';
        desc.style.overflow='hidden';
        safeText(desc, ep.desc || '');

        grow.appendChild(h); grow.appendChild(d); grow.appendChild(desc);

        var actions = document.createElement('div');
        actions.className = 'actions';

        var btn = document.createElement('button');
        btn.className = 'btn sm block';
        btn.type = 'button';
        btn.innerHTML = "<svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M8 5v14l11-7z' fill='currentColor'/></svg> Reproducir";
        btn.onclick = (function(audioUrl, title){
          return function(){
            $('nowPlaying').textContent = 'üéß ' + title;
            var a = $('player');
            a.src = audioUrl;
            a.play().catch(function(){});
          };
        })(ep.audioUrl, ep.title);

        actions.appendChild(btn);

        item.appendChild(grow); item.appendChild(actions);
        box.appendChild(item);
      }

      renderPager($('epPager'), state.epPage, pages, function(page){ state.epPage = page; renderEpisodes(); });
    }

    async function search(){
      var term = $('q').value.trim();
      if(!term){ toast('Escribe algo para buscar.', 'bad'); return; }

      $('searchBtn').disabled = true;
      $('podPager').innerHTML = '';
      $('summary').textContent = 'Buscando‚Ä¶';
      setProvider('‚Äî');
      showSkeleton(Math.min(6, state.podSize));

      try{
        var q = encodeURIComponent(term);
        var url = 'https://itunes.apple.com/search?term=' + q + '&media=podcast&entity=podcast&limit=200';
        var data = await jsonp(url, 'callback', 20000);
        var raw = (data && data.results) ? data.results : [];

        var list = [];
        var seen = {};
        for(var i=0;i<raw.length;i++){
          var r = raw[i];
          if(!r || !r.collectionId) continue;
          var key = String(r.collectionId);
          if(seen[key]) continue;
          seen[key] = 1;
          list.push({
            id: r.collectionId,
            title: r.collectionName || r.trackName || 'Podcast',
            author: r.artistName || '',
            artwork: r.artworkUrl100 || r.artworkUrl60 || '',
            feedUrl: r.feedUrl || ''
          });
        }

        state.pods = list;
        state.podPage = 1;
        setProvider('iTunes Search');
        toast('Encontramos ' + list.length + ' podcasts para ti ‚ú®', list.length ? 'ok' : 'warn');
        renderPods();
        closePanel();

      }catch(e){
        console.warn(e);
        toast('No se pudo buscar. Revisa tu conexi√≥n e intenta de nuevo.', 'bad');
        $('summary').textContent = 'Ocurri√≥ un error al buscar.';
        setProvider('Error');
        $('podList').innerHTML = '';
      }finally{
        $('searchBtn').disabled = false;
      }
    }

    async function openById(itunesId){
      itunesId = String(itunesId || '').trim();
      if(!itunesId){ toast('ID vac√≠o.', 'bad'); return; }

      state.selectedId = itunesId;
      state.eps = [];
      state.epPage = 1;

      $('feedBox').style.display = 'block';
      $('refreshBtn').style.display = 'inline-flex';
      $('epList').innerHTML = '';
      $('epPager').innerHTML = '';
      $('feedTitle').textContent = 'Cargando‚Ä¶';
      $('feedDesc').textContent = '';
      $('feedCount').textContent = '0';

      toast('Preparando episodios‚Ä¶', '');
      setProvider('iTunes Lookup');

      try{
        var url = 'https://itunes.apple.com/lookup?id=' + encodeURIComponent(itunesId) + '&media=podcast&entity=podcastEpisode&limit=200&sort=recent';
        var data = await jsonp(url, 'callback', 22000);
        if(!data || !Array.isArray(data.results)) throw new Error('Respuesta inv√°lida');

        var results = data.results;
        var meta = results.find(function(x){
          return x && (x.wrapperType === 'track' || x.wrapperType === 'collection') && (x.kind === 'podcast' || x.collectionName || x.trackName);
        }) || results[0] || {};

        var title = meta.collectionName || meta.trackName || meta.artistName || ('Podcast ' + itunesId);
        var desc = stripHtml(meta.description || meta.collectionExplicitness || '');

        $('feedTitle').textContent = title;
        $('feedDesc').textContent = (desc || '').slice(0, 240);

        var eps = [];
        for(var i=0;i<results.length;i++){
          var it = results[i];
          var isEpisode = it && (it.kind === 'podcast-episode' || (it.wrapperType === 'track' && (it.episodeUrl || it.previewUrl || it.enclosureUrl)));
          if(!isEpisode) continue;

          var audioUrl = it.episodeUrl || it.previewUrl || it.enclosureUrl || '';
          if(!audioUrl) continue;

          eps.push({
            title: it.trackName || it.collectionName || '(sin t√≠tulo)',
            pubDate: it.releaseDate || it.pubDate || '',
            desc: stripHtml(it.description || it.shortDescription || it.longDescription || ''),
            audioUrl: audioUrl
          });
        }

        var seen = {};
        var deduped = [];
        for(var j=0;j<eps.length;j++){
          var k = String(eps[j].audioUrl || '').trim();
          if(!k || seen[k]) continue;
          seen[k]=1;
          deduped.push(eps[j]);
        }

        state.eps = deduped;
        $('feedCount').textContent = String(state.eps.length);
        setProvider('iTunes');

        if(!state.eps.length){
          toast('Este podcast no comparte audio aqu√≠. Prueba con otro üòâ', 'warn');
        }else{
          toast('Listo: ' + state.eps.length + ' episodios para escuchar üéß', 'ok');
        }

        renderEpisodes();
        closePanel();

      }catch(e){
        console.warn(e);
        setProvider('Error');
        toast('No pude cargar episodios. Prueba con otro podcast o revisa tu conexi√≥n.', 'bad');
      }
    }

    function clearAll(){
      state.pods = []; state.podPage = 1;
      state.selectedId = null;
      state.eps = []; state.epPage = 1;

      $('podList').innerHTML = '';
      $('podPager').innerHTML = '';
      $('summary').textContent = '¬øQu√© te gustar√≠a escuchar hoy? Empieza buscando un tema.';

      $('feedBox').style.display = 'none';
      $('refreshBtn').style.display = 'none';

      $('nowPlaying').textContent = 'üéß Selecciona un episodio para empezar a escuchar';
      var a = $('player');
      a.pause();
      a.removeAttribute('src');
      a.load();

      setProvider('‚Äî');
      toast('Listo. ¬øQu√© escuchamos ahora?', 'ok');
    }

    $('searchBtn').onclick = search;
    $('clearBtn').onclick = clearAll;
    $('q').addEventListener('keydown', function(e){ if(e.key==='Enter') search(); });
    $('podSize').onchange = function(){ state.podSize = parseInt($('podSize').value,10) || 6; state.podPage = 1; renderPods(); };
    $('openByIdBtn').onclick = function(){ openById($('manualId').value); };
    $('refreshBtn').onclick = function(){ if(state.selectedId) openById(state.selectedId); };

    toast('Listo ‚úÖ. Busca un tema y descubre podcasts incre√≠bles.', 'ok');
    setProvider('‚Äî');
  

    /* =========================
       Reproductor PRO - wiring
    ========================= */
    var pp = {
      a: $('player'),
      playBtn: $('ppPlay'),
      playIcon: $('ppPlayIcon'),
      seek: $('ppSeek'),
      seekWrap: $('ppSeekWrap'),
      vol: $('ppVol'),
      volWrap: $('ppVolWrap'),
      cur: $('ppCur'),
      dur: $('ppDur'),
      speed: $('ppSpeed'),
      mute: $('ppMute'),
      volIcon: $('ppVolIcon'),
      rew: $('ppRew'),
      fwd: $('ppFwd')
    };

    function ppFmt(t){
      if (!isFinite(t) || t < 0) return '0:00';
      var m = Math.floor(t/60);
      var s = Math.floor(t%60);
      return m + ':' + String(s).padStart(2,'0');
    }
    function ppSetPlayIcon(isPlaying){
      pp.playIcon.innerHTML = isPlaying
        ? '<path d="M6 5h4v14H6zM14 5h4v14h-4z"/>'
        : '<path d="M8 5v14l11-7z"/>';
    }
    function ppSetVolIcon(isMuted, v){
      if (isMuted || v === 0){
        pp.volIcon.innerHTML = '<path d="M3 10v4h4l5 4V6L7 10H3zm13.59-4.41L20 9l-1.41 1.41L15.17 7l1.42-1.41zM18.59 13.59L20 15l-3.41 3.41-1.42-1.41L18.59 13.59z"/>';
        return;
      }
      if (v < 0.45){
        pp.volIcon.innerHTML = '<path d="M3 10v4h4l5 4V6L7 10H3zm12 2a3 3 0 00-1-2.24v4.48A3 3 0 0015 12z"/>';
        return;
      }
      pp.volIcon.innerHTML = '<path d="M3 10v4h4l5 4V6L7 10H3zm13.5 2a3.5 3.5 0 00-1.5-2.9v5.8A3.5 3.5 0 0016.5 12zm0-8a9.5 9.5 0 01.5 16.9v-2.2A7.5 7.5 0 0017 6.3V4z"/>';
    }
    function ppUpdateSeekUI(){
      var d = pp.a.duration || 0;
      var c = pp.a.currentTime || 0;
      var pct = d ? Math.min(1, Math.max(0, c/d)) : 0;
      pp.seek.value = Math.round(pct * 1000);
      pp.seekWrap.style.setProperty('--fill', (pct*100).toFixed(2) + '%');
      pp.cur.textContent = ppFmt(c);
      pp.dur.textContent = ppFmt(d);
    }
    function ppUpdateVolUI(){
      pp.vol.value = pp.a.volume;
      pp.volWrap.style.setProperty('--fill', (pp.a.volume*100).toFixed(0) + '%');
      ppSetVolIcon(pp.a.muted, pp.a.volume);
    }

    pp.playBtn.addEventListener('click', function(){
      if (!pp.a.src){ toast('Selecciona un episodio primero üôÇ', 'warn'); return; }
      if (pp.a.paused){ pp.a.play().catch(function(){}); }
      else { pp.a.pause(); }
    });
    pp.a.addEventListener('play', function(){ ppSetPlayIcon(true); });
    pp.a.addEventListener('pause', function(){ ppSetPlayIcon(false); });
    pp.a.addEventListener('timeupdate', ppUpdateSeekUI);
    pp.a.addEventListener('loadedmetadata', ppUpdateSeekUI);
    pp.a.addEventListener('durationchange', ppUpdateSeekUI);

    pp.seek.addEventListener('input', function(){
      var pct = (pp.seek.value/1000);
      pp.seekWrap.style.setProperty('--fill', (pct*100).toFixed(2) + '%');
    });
    pp.seek.addEventListener('change', function(){
      var d = pp.a.duration || 0;
      pp.a.currentTime = d * (pp.seek.value/1000);
    });

    pp.vol.addEventListener('input', function(){
      pp.a.volume = parseFloat(pp.vol.value);
      if (pp.a.volume > 0 && pp.a.muted) pp.a.muted = false;
      ppUpdateVolUI();
    });
    pp.mute.addEventListener('click', function(){
      pp.a.muted = !pp.a.muted;
      ppUpdateVolUI();
    });
    pp.speed.addEventListener('change', function(){
      pp.a.playbackRate = parseFloat(pp.speed.value);
    });
    pp.rew.addEventListener('click', function(){
      pp.a.currentTime = Math.max(0, (pp.a.currentTime || 0) - 15);
    });
    pp.fwd.addEventListener('click', function(){
      var max = isFinite(pp.a.duration) ? pp.a.duration : (pp.a.currentTime || 0) + 30;
      pp.a.currentTime = Math.min(max, (pp.a.currentTime || 0) + 30);
    });

    pp.a.volume = 0.7;
    ppUpdateVolUI();
    ppSetPlayIcon(false);

})();
  </script>
  <script>
(function () {

  const audio = document.getElementById('player');
  const nowPlaying = document.getElementById('nowPlaying');
  const playBtn = document.getElementById('ppPlay');
  const rewBtn = document.getElementById('ppRew');
  const fwdBtn = document.getElementById('ppFwd');

  if (!audio || !('mediaSession' in navigator)) {
    console.warn('Media Session no disponible');
    return;
  }

  // --- METADATOS DIN√ÅMICOS ---
  function updateMediaSession(title, artwork) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: title || 'Podcast ¬∑ 6 en 6',
      artist: 'Podcasts ¬∑ 6 en 6 Premium',
      album: 'Podcast',
      artwork: [
        { src: artwork || 'https://via.placeholder.com/96', sizes: '96x96', type: 'image/png' },
        { src: artwork || 'https://via.placeholder.com/192', sizes: '192x192', type: 'image/png' },
        { src: artwork || 'https://via.placeholder.com/512', sizes: '512x512', type: 'image/png' }
      ]
    });
  }

  // --- CONTROLES DEL SISTEMA ---
  navigator.mediaSession.setActionHandler('play', () => audio.play());
  navigator.mediaSession.setActionHandler('pause', () => audio.pause());

  navigator.mediaSession.setActionHandler('seekbackward', () => {
    audio.currentTime = Math.max(0, audio.currentTime - 15);
  });

  navigator.mediaSession.setActionHandler('seekforward', () => {
    audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 30);
  });

  navigator.mediaSession.setActionHandler('stop', () => {
    audio.pause();
    audio.currentTime = 0;
  });

  // --- ESTADO ---
  audio.addEventListener('play', () => {
    navigator.mediaSession.playbackState = 'playing';
  });

  audio.addEventListener('pause', () => {
    navigator.mediaSession.playbackState = 'paused';
  });

  // --- CUANDO CAMBIA EL EPISODIO ---
  audio.addEventListener('loadedmetadata', () => {
    const title = nowPlaying ? nowPlaying.textContent.replace('üéß', '').trim() : 'Podcast';
    const img = document.querySelector('.thumb')?.src || '';
    updateMediaSession(title, img);
  });

  // --- SINCRONIZA TUS BOTONES ---
  if (playBtn) {
    playBtn.addEventListener('click', () => {
      if (audio.paused) audio.play();
      else audio.pause();
    });
  }

  if (rewBtn) {
    rewBtn.addEventListener('click', () => {
      audio.currentTime -= 15;
    });
  }

  if (fwdBtn) {
    fwdBtn.addEventListener('click', () => {
      audio.currentTime += 30;
    });
  }

})();
  </script>
</body>
</html>
